<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <title>Detalle de Auditoría</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body class="bg-light">
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">
                        <i class="bi bi-file-text"></i> Detalle del Registro de Auditoría
                    </h4>
                </div>
                <div class="card-body">

                    <!-- ID -->
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <strong class="text-muted">ID:</strong>
                        </div>
                        <div class="col-md-9">
                            <span th:text="${auditoria.id}"></span>
                        </div>
                    </div>

                    <!-- Módulo -->
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <strong class="text-muted">Módulo:</strong>
                        </div>
                        <div class="col-md-9">
                            <span th:if="${auditoria.modulo == 'CLIENTE'}" class="badge bg-info fs-6">
                                <i class="bi bi-people"></i> Cliente
                            </span>
                            <span th:if="${auditoria.modulo == 'MESA'}" class="badge bg-success fs-6">
                                <i class="bi bi-table"></i> Mesa
                            </span>
                        </div>
                    </div>

                    <!-- Acción -->
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <strong class="text-muted">Acción:</strong>
                        </div>
                        <div class="col-md-9">
                            <span th:if="${auditoria.accion == 'CREAR'}" class="badge bg-success fs-6">Crear</span>
                            <span th:if="${auditoria.accion == 'EDITAR'}" class="badge bg-warning fs-6">Editar</span>
                            <span th:if="${auditoria.accion == 'ELIMINAR'}" class="badge bg-danger fs-6">Eliminar</span>
                            <span th:if="${auditoria.accion == 'LISTAR'}" class="badge bg-info fs-6">Listar</span>
                            <span th:if="${auditoria.accion == 'BUSCAR'}" class="badge bg-primary fs-6">Buscar</span>
                            <span th:if="${auditoria.accion == 'ASIGNAR'}" class="badge bg-primary fs-6">Asignar</span>
                            <span th:if="${auditoria.accion == 'LIBERAR'}" class="badge bg-secondary fs-6">Liberar</span>
                            <span th:if="${auditoria.accion == 'CAMBIAR_ESTADO'}" class="badge bg-warning fs-6">Cambiar Estado</span>
                        </div>
                    </div>

                    <!-- Fecha y Hora -->
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <strong class="text-muted">Fecha y Hora:</strong>
                        </div>
                        <div class="col-md-9">
                            <i class="bi bi-calendar-event text-primary"></i>
                            <span th:text="${#temporals.format(auditoria.fechaHora, 'dd/MM/yyyy')}"></span>
                            <i class="bi bi-clock text-primary ms-3"></i>
                            <span th:text="${#temporals.format(auditoria.fechaHora, 'HH:mm:ss')}"></span>
                        </div>
                    </div>

                    <!-- Usuario -->
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <strong class="text-muted">Usuario:</strong>
                        </div>
                        <div class="col-md-9">
                            <i class="bi bi-person-circle"></i>
                            <span th:text="${auditoria.usuario}"></span>
                        </div>
                    </div>

                    <!-- IP Address -->
                    <div class="row mb-3" th:if="${auditoria.ipAddress != null}">
                        <div class="col-md-3">
                            <strong class="text-muted">Dirección IP:</strong>
                        </div>
                        <div class="col-md-9">
                            <i class="bi bi-router"></i>
                            <span th:text="${auditoria.ipAddress}"></span>
                        </div>
                    </div>

                    <!-- Registro Afectado -->
                    <div class="row mb-3" th:if="${auditoria.registroId != null}">
                        <div class="col-md-3">
                            <strong class="text-muted">Registro Afectado:</strong>
                        </div>
                        <div class="col-md-9">
                            <span class="badge bg-secondary">ID: <span th:text="${auditoria.registroId}"></span></span>
                            <span th:if="${auditoria.registroNombre != null}" class="ms-2" th:text="${auditoria.registroNombre}"></span>
                        </div>
                    </div>

                    <!-- Descripción -->
                    <hr class="my-4">
                    <div class="mb-3">
                        <strong class="text-muted d-block mb-2">Descripción:</strong>
                        <div class="alert alert-light border">
                            <i class="bi bi-file-text"></i>
                            <span th:text="${auditoria.descripcion}"></span>
                        </div>
                    </div>

                    <!-- Botones de Acción -->
                    <hr class="my-4">
                    <div class="d-flex gap-2 justify-content-center">
                        <a th:href="@{/auditoria}" class="btn btn-secondary">
                            <i class="bi bi-arrow-left"></i> Volver al Listado
                        </a>
                        <a th:if="${auditoria.registroId != null}"
                           th:href="@{/auditoria/historial/{modulo}/{registroId}(modulo=${auditoria.modulo},registroId=${auditoria.registroId})}"
                           class="btn btn-primary">
                            <i class="bi bi-clock-history"></i> Ver Historial Completo
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>